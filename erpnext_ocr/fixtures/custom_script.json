[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2018-01-22 08:10:39.975053", 
  "name": "Sales Invoice-Client", 
  "script": "function copyToClipboard(id) {\n\n    var copyText = document.getElementById(id);\n    /* Select the text field */\n  copyText.select();\n\n  /* Copy the text inside the text field */\n  document.execCommand(\"Copy\");\n\n}\n\n\nfrappe.ui.form.on('Sales Invoice', {\n    // validate:function (frm) {\n    //\n    // },\n\n    refresh: function (frm) {\n\n        cur_frm.add_custom_button(__('OCR'),\n            function () {\n\n                var d = new frappe.ui.Dialog({\n                    'fields': [\n                        {'fieldname': 'ht', 'fieldtype': 'HTML'},\n                    ],\n                    // primary_action: function(){\n                    //     d.hide();\n                    //     show_alert(d.get_values());\n                    // }\n                });\n\n\n                /*return {\n        \"source\":source,\n        \"vendor_name\":vendor_name,\n        \"vendor_address\":vendor_address,\n        \"vendor_phone\":vendor_phone,\n        \"vendor_address\":vendor_address,\n        \"invoice_date\":invoice_date,\n        \"subTotal\":vendor_subTotal,\n        # \"payment_cardno\":payment_cardno,\n        \"payment_val\":payment_val,\n        \"items\":items\n    } */\n                 frappe.call({\n                     method: \"erpnext_ocr.erpnext_ocr.xml_reader.read\",\n                     // args: {\n                     //     \"sales_order\": cur_frm.doc.sales_order\n                     // },\n                     callback: function (r, rt) {\n                         console.log(r);\n                         var html = \"\";\n                         html += \"<b>Source: </b><input type='text' id='p1' value='\"+r.message['source']+\"'><button id='bt1'>Copy Text</button>\";\n                         html += \"<br><b>Vendor Name: </b><input type='text' id='p2' value='\"+r.message['vendor_name']+\"'><button id='bt2'>Copy Text</button>\";\n                         html += \"<br><b>Vendor Address: </b><input type='text' id='p3' value='\"+r.message['vendor_address']+\"'><button id='bt3'>Copy Text</button>\";\n                         html += \"<br><b>Invoice Date: </b><input type='text' id='p4' value='\"+r.message['invoice_date']+\"'><button id='bt4'>Copy Text</button>\";\n                         html += \"<br><b>Sub Total: </b><input type='text' id='p5' value='\"+r.message['subTotal']+\"'><button id='bt5'>Copy Text</button>\";\n                         html += \"<br><b>Payment Value: </b><input type='text' id='p6' value='\"+r.message['payment_val']+\"'><button id='bt6'>Copy Text</button>\";\n                         // html += \"<br><b>Vendor Name: </b>\"+r.message['vendor_name'];\n                         // html += \"<br><b>Vendor Address: </b>\"+r.message['vendor_address'];\n                         // html += \"<br><b>Invoice Date: </b>\"+r.message['invoice_date'];\n                         // html += \"<br><b>Sub Total: </b>\"+r.message['subTotal'];\n                         // html += \"<br><b>Payment Value: </b>\"+r.message['payment_val'];\n                         d.fields_dict.ht.$wrapper.html(html);\n                         d.show();\n                         document.getElementById(\"bt1\").addEventListener(\"click\", function(){\n                           copyToClipboard(\"p1\");\n                        }\n                        ,false );\n                         \n                         \n                            document.getElementById(\"bt2\").addEventListener(\"click\", function(){\n                           copyToClipboard(\"p2\");\n                        }\n                        ,false );\n                         \n                         \n                            document.getElementById(\"bt3\").addEventListener(\"click\", function(){\n                           copyToClipboard(\"p3\");\n                        }\n                        ,false );\n                         \n                         \n                            document.getElementById(\"bt4\").addEventListener(\"click\", function(){\n                           copyToClipboard(\"p4\");\n                        }\n                        ,false );\n                         \n                         \n                            document.getElementById(\"bt5\").addEventListener(\"click\", function(){\n                           copyToClipboard(\"p5\");\n                        }\n                        ,false );\n                         \n                            document.getElementById(\"bt6\").addEventListener(\"click\", function(){\n                           copyToClipboard(\"p6\");\n                        }\n                        ,false );\n                         \n                         \n                     }\n                     \n                 });\n\n            }).addClass(\"btn-primary\")\n    }\n\n});", 
  "script_type": "Client"
 }
]